## 인터럽트(Interrupt)
- 인터럽트란 운영체제가 프로그램 실행중에 CPU의 현재 처리 순서를 중단시키고, 우선적으로 다른 동작을 수행하도록 하는 것을 뜻한다.
- 이러한 인터럽트는 크게 외부 인터럽트, 내부 인터럽트, 소프트웨어 인터럽트로 구분된다.

### External Interrupt
외부 인터럽트는 CPU 코어 외부 요인으로 발생하는 인터럽트를 의미하며, 아래와 같은 종류들이 있다.
1. **전원 이상 인터럽트**
   - 갑자기 전원 공급이 중단되는 경우 인터럽트를 걸어 작업 중이던 프로세스를 대피시킨다.
2. **I/O 인터럽트**
   - CPU가 I/O장치(키보드, 마우스, 프린터 등)에게 일을 맡기거나, I/O장치가 CPU에게 정보를 전달해줄 때 호출된다.
3. **타이머 인터럽트**
   - 운영체제 내부의 타이머가 발생시키는 인터럽트. 특정 프로그램이 CPU자원을 과점하지 못하도록 일정 주기로 인터럽트를 발생시킨다.

### Internal Interrupt
내부 인터럽트는 CPU 코어 내에서 프로세스가 실행도중에 걸리는 인터럽트로, 프로그램 검사 인터럽트이다. Exception Interrupt, 혹은 Trap이라 부른다.
- Exception Interrupt(Trap)
    - Division by zero
    - Overflow/Underflow
    - 기타 Exception

### Software Interrupt
소프트웨어 인터럽트는 SVC(Supervisor Call)이 있다. SVC는 다음과 같은 상황에 발생한다.
- 프로그램이 운영체제의 기능(File I/O, 메모리 할당 등)을 필요로 할 때, 프로그램은 SVC 인스트럭션을 사용하여 인터럽트를 발생시킨다. SVC중에는 유저모드에서 커널모드로 전환하여 작업 후 다시 유저모드로 전환하는 과정이 진행된다.


### 인터럽트의 구성 요소

- **인터럽트 핸들러**
  - 실제 인터럽트를 처리하기 위한 루틴으로 ISR(Interrupt Service Routine)이라고도 한다.
  - 발생할 수 있는 여러 인터럽트들에 대한 처리할 내용이 프로그래밍되어 있다.
- **인터럽트 벡터**
  - 여러 인터럽트 발생 시 해당 인터럽트가 처리해야할 ISR의 주소를 보관하고 있는 벡터
  - ISR을 가리키는 일종의 포인터역할을 한다.
- **PCB(Process Control Block)**
  - 커널의 데이터 영역에 존재하며 각 프로세스마다 고유의 PCB가 있다.
  - 인터럽트 발생 시 프로세스의 진행 상황(메모리 주소, 레지스터 값, 하드웨어 상태 등)을 저장한다.

### 인터럽트 처리 과정
인터럽트 처리 과정은 요청 > 중단 > 보관 > ISR처리 > 재개 과정을 거친다. 좀 더 상세히 구분하면 아래와 같다.
1. 인터럽트 요청
2. 프로그램 실행 중단
   - 현재 실행중이던 Micro Operation까지만 수행
3. 현재 실행중이던 프로그램 상태 보관
   - PCB, PC 저장
4. 인터럽트 원인 판별
   - 인터럽트를 요청한 장치 식별
   - 인터럽트 백터를 참조하여 ISR주소를 얻음
5. ISR 처리
   - 실질적인 인터럽트 작업을 처리한다
   - ISR 수행중에도 다른 인터럽트가 발생하면 우선순위에 따라 다시 1번 과정부터 재수행 될 수 있다.
   - 다른 인터럽트에 의한 중단을 방지하려면 인터럽트 플래그(IF)를 0으로 설정하면 방지할 수 있다.
6. 상태 복구
   - 상태 복구가 시행되면, 저장해둔 PC(Program Counter)를 읽어들여 이전 실행위치로 복원한다.
7. 프로그램 실행 재개
   - PCB에 저장된 값을 읽어들여 중단되었던 위치부터 작업을 재개한다.


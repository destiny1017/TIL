## 단위 테스트, Vladimir Khorikov

### 1. 단위테스트의 목표
![img.png](../assets/effect_unit_test.png)
- 단위테스트의 목표는 소프트웨어의 지속적인 성장을 가능하게 하는 것
- 유지보수가 지속될수록 코드는 점점 나빠지는 경향이 있다. 즉, 엔트로피가 증가한다. 이를 꼼꼼한 단위 테스트의 작성으로 극복할 수 있다.
- 하지만 핵심은 '좋은' 단위 테스트를 작성하는 것이다. 나쁜 단위 테스트는 오히려 소프트웨어 유지비용을 증가시킬수도 있다.
- 커버리지 지표는 좋은 부정 지표이며, 나쁜 긍정 지표이다. 커버리지 수치가 높다고 하여 테스트 스위트의 품질이 좋다고 할 수 없다.
- 특정 커버리지 수치를 목표로하면 본질에서 멀어질 수 있으므로 좋은 방법이 아니다.
- #### 성공적인 테스트 스위트는 다음과 같은 특성을 가졌다.
  - 개발 주기에 통합되어 있다.
  - 코드베이스 중 가장 중요한 부분만을 대상으로 한다.
  - 최소한의 유지비로 최대의 가치를 이끌어낸다.
- #### 단위 테스트의 목표를 달성하기 위한 유일한 방법은 아래와 같다.
  - 좋은 테스트와 좋지 않은 테스트를 구별하는 방법을 배운다.
  - 테스트를 리팩터링해서 더 가치 있게 만든다.
  
### 2. 단위테스트란 무엇인가
- 단위테스트는 아래와 같은 세가지의 정의로 나타낼 수 있다.
  - 단일 동작 단위를 검증하고
  - 빠르게 수행하고
  - 다른 테스트와 별도로 처리한다.
- 다른 테스트와 별도로 처리한다라는 테스트 격리 관점의 차이로, 고전파와 런던파로 나뉘었다.

![img.png](../assets/Classist_Mockist.png)
- #### 런던파(aka. Mockist)
  - 런던파는 테스트 대상 단위를 분리해야한다고 주장한다. 테스트는 메서드의 클래스와 1:1관계를 가지며, 메서드 수행에 의존하는 불변 값객체를 제외한 모든 것들을 테스트 대역(Test double)으로 대체해야한다.
- #### 고전파(aka. Classist)
  - 고전파는 단위가 아닌 단위 테스트 메서드를 서로 분리해야한다고 주장한다. 테스트의 관점을 코드 단위가 아닌 동작의 단위로 보기 때문에, 하나의 동작에 의존하는 클래스가 있다면 그것 또한 같이 수행되는 게 하나의 단위 테스트를 수행하는 것이라는 관점이다.
- 런던파는 더나은 입자성(작은 조각으로 분리됨), 복잡한 의존관계를 가진 클래스에 대한 테스트의 용이성, 테스트 수행 실패시 디버깅의 용이성 등의 장점을 갖는다.
- 하지만 테스트의 중점이 동작보다 코드에 집중되어 있어, 핵심보다 지엽적인 부분에 집착하여 과잉 명세를 유발하는 문제가 있으며, 복잡한 의존성 자체가 설계상의 문제이지만 모든걸 mock으로 해결해버리면 이 문제를 제대로 파악하지 못하게 된다는 문제가 있다.
- 통합테스트는 단위테스트의 기준 중 하나 이상을 충족하지 못하는 테스트다. e2e테스트는 통합테스트의 일부이지만 보다 더 많은 의존성을 테스트하고, 사용자 관점의 테스트이다.
